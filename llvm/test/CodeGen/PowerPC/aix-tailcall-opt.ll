; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 3
; RUN: llc -verify-machineinstrs -mtriple=powerpc-ibm-aix < %s | FileCheck --check-prefix=AIX-32 %s
; RUN: llc -verify-machineinstrs -mtriple=powerpc64-ibm-aix < %s | FileCheck --check-prefix=AIX-64 %s

define hidden fastcc i32 @k(i32 %a, i32 %b) {
; AIX-32-LABEL: k:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    add 3, 3, 4
; AIX-32-NEXT:    blr
;
; AIX-64-LABEL: k:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    add 3, 3, 4
; AIX-64-NEXT:    blr
entry:
  %c = add i32 %a, %b
  ret i32 %c
}

define hidden fastcc i32 @ff(i32 %a) {
; AIX-32-LABEL: ff:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    blr
;
; AIX-64-LABEL: ff:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    blr
entry:
  ret i32 %a
}

define fastcc i32 @f(i32 %a, i32 %b) {
; AIX-32-LABEL: f:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    b .ff
; AIX-32-NEXT:    #TC_RETURNd .ff 0
;
; AIX-64-LABEL: f:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    clrldi 3, 3, 32
; AIX-64-NEXT:    b .ff
; AIX-64-NEXT:    #TC_RETURNd8 .ff 0
entry:
  %r = tail call fastcc i32 @ff(i32 %a)
  ret i32 %r
}

define fastcc i32 @kk(i32 %a) {
; AIX-32-LABEL: kk:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    li 4, 1024
; AIX-32-NEXT:    b .k
; AIX-32-NEXT:    #TC_RETURNd .k 0
;
; AIX-64-LABEL: kk:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    clrldi 3, 3, 32
; AIX-64-NEXT:    li 4, 1024
; AIX-64-NEXT:    b .k
; AIX-64-NEXT:    #TC_RETURNd8 .k 0
entry:
  %r = tail call fastcc i32 @k(i32 %a, i32 1024)
  ret i32 %r
}

define fastcc i32 @g(i32 %a) {
; AIX-32-LABEL: g:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    b .ff
; AIX-32-NEXT:    #TC_RETURNd .ff 0
;
; AIX-64-LABEL: g:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    clrldi 3, 3, 32
; AIX-64-NEXT:    b .ff
; AIX-64-NEXT:    #TC_RETURNd8 .ff 0
entry:
  %r = tail call fastcc i32 @ff(i32 %a)
  ret i32 %r
}

define fastcc i32 @gg(i32 %a) {
; AIX-32-LABEL: gg:
; AIX-32:       # %bb.0: # %entry
; AIX-32-NEXT:    mflr 0
; AIX-32-NEXT:    stwu 1, -64(1)
; AIX-32-NEXT:    stw 0, 72(1)
; AIX-32-NEXT:    bl .ff
; AIX-32-NEXT:    addi 3, 3, 1
; AIX-32-NEXT:    addi 1, 1, 64
; AIX-32-NEXT:    lwz 0, 8(1)
; AIX-32-NEXT:    mtlr 0
; AIX-32-NEXT:    blr
;
; AIX-64-LABEL: gg:
; AIX-64:       # %bb.0: # %entry
; AIX-64-NEXT:    mflr 0
; AIX-64-NEXT:    stdu 1, -112(1)
; AIX-64-NEXT:    clrldi 3, 3, 32
; AIX-64-NEXT:    std 0, 128(1)
; AIX-64-NEXT:    bl .ff
; AIX-64-NEXT:    addi 3, 3, 1
; AIX-64-NEXT:    addi 1, 1, 112
; AIX-64-NEXT:    ld 0, 16(1)
; AIX-64-NEXT:    mtlr 0
; AIX-64-NEXT:    blr
entry:
  %r = tail call fastcc i32 @ff(i32 %a)
  %r.0 = add i32 %r, 1
  ret i32 %r.0
}
